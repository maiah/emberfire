(function() {function f(a){throw a;}var h=void 0,l=!0,m=null,p=!1;function q(a){return function(){return this[a]}}function s(a){return function(){return a}}var t,aa=this;
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return a!==h}function ca(a){var b=ba(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function da(a){return"number"==typeof a}Math.floor(2147483648*Math.random()).toString(36);function ea(a,b,c){return a.call.apply(a.bind,arguments)}
function fa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function z(a,b,c){z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return z.apply(m,arguments)}function ga(a,b){function c(){}c.prototype=b.prototype;a.dc=b.prototype;a.prototype=new c};function A(a,b,c){this.type=a;this.P=b;this.Aa=c};function ha(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))}function ia(){this.Oa=h}
function ja(a,b,c){switch(typeof b){case "string":ka(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==m){c.push("null");break}if("array"==ba(b)){var d=b.length;c.push("[");for(var e="",g=0;g<d;g++)c.push(e),e=b[g],ja(a,a.Oa?a.Oa.call(b,""+g,e):e,c),e=",";c.push("]");break}c.push("{");d="";for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(e=b[g],"function"!=typeof e&&(c.push(d),ka(g,
c),c.push(":"),ja(a,a.Oa?a.Oa.call(b,g,e):e,c),d=","));c.push("}");break;case "function":break;default:f(Error("Unknown type: "+typeof b))}}var la={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ma=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function ka(a,b){b.push('"',a.replace(ma,function(a){if(a in la)return la[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return la[a]=e+b.toString(16)}),'"')};function na(a){if("undefined"!==typeof JSON&&u(JSON.stringify))a=JSON.stringify(a);else{var b=[];ja(new ia,a,b);a=b.join("")}return a};function B(a,b){this.ia=a?a:oa;this.F=b?b:pa}function oa(a,b){return a<b?-1:a>b?1:0}t=B.prototype;t.L=function(a,b){return new B(this.ia,this.F.L(a,b,this.ia).copy(m,m,p,m,m))};t.remove=function(a){return new B(this.ia,this.F.remove(a,this.ia).copy(m,m,p,m,m))};t.get=function(a){for(var b,c=this.F;!c.a();){b=this.ia(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return m};
function qa(a,b){for(var c,d=a.F,e=m;!d.a();){c=a.ia(b,d.key);if(0===c){if(d.left.a())return e?e.key:m;for(d=d.left;!d.right.a();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}f("Attempted to find predecessor key for a nonexistent key.  What gives?")}t.a=function(){return this.F.a()};t.count=function(){return this.F.count()};t.va=function(){return this.F.va()};t.na=function(){return this.F.na()};t.R=function(a){return this.F.R(a)};t.aa=function(a){return this.F.aa(a)};
t.ma=function(a){return new ra(this.F,a)};function ra(a,b){this.wb=b;for(this.Fa=[];!a.a();)this.Fa.push(a),a=a.left}function sa(a){if(0===a.Fa.length)return m;var b=a.Fa.pop(),c;c=a.wb?a.wb(b.key,b.value):{key:b.key,value:b.value};for(b=b.right;!b.a();)a.Fa.push(b),b=b.left;return c}function ta(a,b,c,d,e){this.key=a;this.value=b;this.color=c!=m?c:l;this.left=d!=m?d:pa;this.right=e!=m?e:pa}t=ta.prototype;
t.copy=function(a,b,c,d,e){return new ta(a!=m?a:this.key,b!=m?b:this.value,c!=m?c:this.color,d!=m?d:this.left,e!=m?e:this.right)};t.count=function(){return this.left.count()+1+this.right.count()};t.a=s(p);t.R=function(a){return this.left.R(a)||a(this.key,this.value)||this.right.R(a)};t.aa=function(a){return this.right.aa(a)||a(this.key,this.value)||this.left.aa(a)};function ua(a){return a.left.a()?a:ua(a.left)}t.va=function(){return ua(this).key};t.na=function(){return this.right.a()?this.key:this.right.na()};
t.L=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.copy(m,m,m,e.left.L(a,b,c),m):0===d?e.copy(m,b,m,m,m):e.copy(m,m,m,m,e.right.L(a,b,c));return va(e)};function wa(a){if(a.left.a())return pa;!a.left.j()&&!a.left.left.j()&&(a=xa(a));a=a.copy(m,m,m,wa(a.left),m);return va(a)}
t.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))!c.left.a()&&!c.left.j()&&!c.left.left.j()&&(c=xa(c)),c=c.copy(m,m,m,c.left.remove(a,b),m);else{c.left.j()&&(c=ya(c));!c.right.a()&&!c.right.j()&&!c.right.left.j()&&(c=za(c),c.left.left.j()&&(c=ya(c),c=za(c)));if(0===b(a,c.key)){if(c.right.a())return pa;d=ua(c.right);c=c.copy(d.key,d.value,m,m,wa(c.right))}c=c.copy(m,m,m,m,c.right.remove(a,b))}return va(c)};t.j=q("color");
function va(a){a.right.j()&&!a.left.j()&&(a=Aa(a));a.left.j()&&a.left.left.j()&&(a=ya(a));a.left.j()&&a.right.j()&&(a=za(a));return a}function xa(a){a=za(a);a.right.left.j()&&(a=a.copy(m,m,m,m,ya(a.right)),a=Aa(a),a=za(a));return a}function Aa(a){return a.right.copy(m,m,a.color,a.copy(m,m,l,m,a.right.left),m)}function ya(a){return a.left.copy(m,m,a.color,m,a.copy(m,m,l,a.left.right,m))}
function za(a){var b,c;b=a.left.copy(m,m,!a.left.color,m,m);c=a.right.copy(m,m,!a.right.color,m,m);return a.copy(m,m,!a.color,b,c)}function Ba(){}t=Ba.prototype;t.copy=function(){return this};t.L=function(a,b){return new ta(a,b,h,h,h)};t.remove=function(){return this};t.get=s(m);t.count=s(0);t.a=s(l);t.R=s(p);t.aa=s(p);t.va=s(m);t.na=s(m);t.j=s(p);var pa=new Ba;var Ca=/^[a-zA-Z0-9\-_.!~*'()]*$/;function Da(a){a=""+a;return!Ca.test(a)?encodeURIComponent(a):a};function C(a){if(a instanceof C)return a;if(1==arguments.length){this.g=a.split("/");for(var b=0,c=0;c<this.g.length;c++)0<this.g[c].length&&(this.g[b]=this.g[c],b++);this.g.length=b;this.H=0}else this.g=arguments[0],this.H=arguments[1]}function D(a){return a.H>=a.g.length?m:a.g[a.H]}function F(a){var b=a.H;b<a.g.length&&b++;return new C(a.g,b)}function H(a){return a.H<a.g.length?a.g[a.g.length-1]:m}
C.prototype.toString=function(){for(var a="",b=this.H;b<this.g.length;b++)""!==this.g[b]&&(a+="/"+this.g[b]);return a};C.prototype.parent=function(){if(this.H>=this.g.length)return m;for(var a=[],b=this.H;b<this.g.length-1;b++)a.push(this.g[b]);return new C(a,0)};C.prototype.ha=function(a){for(var b=[],c=this.H;c<this.g.length;c++)b.push(this.g[c]);a=a.split("/");for(c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new C(b,0)};C.prototype.a=function(){return this.H>=this.g.length};
function Ea(a,b){var c=D(a);if(c===m)return b;if(c===D(b))return Ea(F(a),F(b));f("INTERNAL ERROR: innerParsedPath ("+b+") is not within outerParsedPath ("+a+")")};function Fa(a,b){this.ga=a;this.pa="undefined"!==typeof b?b:m}t=Fa.prototype;t.M=s(l);t.f=q("pa");t.Ta=function(a){return new Fa(this.ga,a)};t.t=function(){return I};t.e=function(a){return D(a)===m?this:I};t.D=s(m);t.n=function(a,b){return(new J(new B,this.pa)).n(a,b)};t.ra=function(a,b){var c=D(a);return c===m?b:this.n(c,I.ra(F(a),b))};t.a=s(p);t.v=function(a){return a&&this.f()!==m?{".value":this.b(),".priority":""+this.f()}:this.b()};
t.hash=function(){var a="";this.f()!==m&&(a+="priority:"+this.f()+":");a+=typeof this.ga+":"+this.ga;return Ga(a)};t.b=q("ga");t.toString=function(){return"string"===typeof this.ga?'"'+this.ga+'"':this.ga};function J(a,b){this.B=a||new B;this.pa="undefined"!==typeof b?b:m}t=J.prototype;t.M=s(p);t.f=q("pa");t.Ta=function(a){return new J(this.B,a)};t.n=function(a,b){var c=this.B.remove(a);b&&b.a()&&(b=m);b!==m&&(c=c.L(a,b));return b&&b.f()!==m?new Ha(c,m,this.pa):new J(c,this.pa)};
t.ra=function(a,b){var c=D(a);if(c===m)return b;var d=this.t(c).ra(F(a),b);return this.n(c,d)};t.a=function(){return this.B.a()};var Ia=/^\d+$/;t=J.prototype;t.v=function(a){if(this.a())return m;var b={},c=0,d=0,e=l;this.m(function(g,i){b[g]=i.v(a);c++;e&&Ia.test(g)?d=Math.max(d,Number(g)):e=p});if(!a&&e&&d<2*c){var g=[],i;for(i in b)g[i]=b[i];return g}a&&this.f()!==m&&(b[".priority"]=""+this.f());return b};
t.hash=function(){var a="";this.f()!==m&&(a+="priority:"+this.f()+":");this.m(function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});return""===a?"":Ga(a)};t.t=function(a){a=this.B.get(a);return a===m?I:a};t.e=function(a){var b=D(a);return b===m?this:this.t(b).e(F(a))};t.D=function(a){return qa(this.B,a)};t.nb=function(){return this.B.va()};t.pb=function(){return this.B.na()};t.m=function(a){return this.B.R(a)};t.Xa=function(a){return this.B.aa(a)};t.ma=function(){return this.B.ma()};
t.toString=function(){var a="{",b=l;this.m(function(c,d){b?b=p:a+=", ";a+='"'+c+'" : '+d.toString()});return a+="}"};var I=new J(new B);function Ha(a,b,c){J.call(this,a,c);b===m&&(b=new B(Ja),a.R(function(a,c){b=b.L({name:a,r:c.f()},c)}));this.da=b}ga(Ha,J);t=Ha.prototype;t.n=function(a,b){var c=this.t(a),d=this.B,e=this.da;c!==m&&(d=d.remove(a),e=e.remove({name:a,r:c.f()}));b&&b.a()&&(b=m);b!==m&&(d=d.L(a,b),e=e.L({name:a,r:b.f()},b));return new Ha(d,e,this.f())};
t.D=function(a,b){var c=qa(this.da,{name:a,r:b.f()});return c?c.name:m};t.m=function(a){return this.da.R(function(b,c){return a(b.name,c)})};t.Xa=function(a){return this.da.aa(function(b,c){return a(b.name,c)})};t.ma=function(){return this.da.ma(function(a,b){return{key:a.name,value:b}})};t.nb=function(){return this.da.va().name};t.pb=function(){return this.da.na().name};
function Ka(a,b){if("object"!==typeof a)return new Fa(a,b);if(a===m)return I;var c=".priority"in a?a[".priority"]:b||m;c!==m&&(c=La.test(c)?Number(c):c);if(".value"in a&&a[".value"]!==m)return new Fa(a[".value"],c);var c=new J(new B,c),d;for(d in a)if("."!==d.substring(0,1)){var e=Ka(a[d]);if(e.M()||!e.a())c=c.n(d,e)}return c}function Ja(a,b){return a.r!==b.r?a.r===m?-1:b.r===m?1:typeof a.r!==typeof b.r?"number"===typeof a.r?-1:1:a.r>b.r?1:-1:a.name!==b.name?a.name<b.name?-1:1:0};function Ma(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};var Na=/[\[\].#$\/]/,Oa=/[\[\].#$]/;function Pa(a){return x(a)&&0!==a.length&&!Na.test(a)}function K(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);e&&f(Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+"."))}function Qa(a,b,c){(!c||u(b))&&Ra(L(a,1,c),b)}
function Ra(a,b){u(b)||f(Error(a+"contains undefined."));"function"==ba(b)&&f(Error(a+"contains a function."));x(b)&&b.length>10485760/3&&10485760<Ma(b).length&&f(Error(a+"contains a string greater than 10485760 utf8 bytes ('"+b.substring(0,50)+"...')"));var c=ba(b);if("object"==c||"array"==c||"function"==c)for(var d in b)".priority"!==d&&".value"!==d&&!Pa(d)&&f(Error(a+"contains an invalid key ("+d+').  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')),Ra(a,b[d])}
function Sa(a,b,c,d){(!d||u(c))&&c!==m&&!da(c)&&!x(c)&&f(Error(L(a,b,d)+"must be a valid firebase priority (null or a string.)"))}function M(a,b,c,d){(!d||u(c))&&"function"!=ba(c)&&f(Error(L(a,b,d)+"must be a valid function."))}function Ta(a,b){switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:f(Error(L(a,1,p)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'))}}
function Ua(a,b){u(b)&&!Pa(b)&&f(Error(L(a,2,l)+'must be a valid firebase key (non-empty string, not containing ".", "#", "$", "/", "[", or "]").'))}function Va(a,b){(!x(b)||0===b.length||Oa.test(b))&&f(Error(L(a,1,p)+'must be a non-empty string and can\'t contain ".", "#", "$", "[", or "]".'))}
function L(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:N(p,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}a+=" failed: ";c&&(a+="If provided, ");return a+(d+" argument ")};function O(a,b){this.c=a;this.$=b}O.prototype.v=function(){K("Firebase.DataSnapshot.val",0,0,arguments.length);return this.c.v()};O.prototype.val=O.prototype.v;O.prototype.Eb=function(){K("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.c.v(l)};O.prototype.exportVal=O.prototype.Eb;O.prototype.ha=function(a){K("Firebase.DataSnapshot.child",0,1,arguments.length);da(a)&&(a=""+a);Va("Firebase.DataSnapshot.child",a);var b=new C(a),c=H(b)||this.$;return new O(this.c.e(b),c)};
O.prototype.child=O.prototype.ha;O.prototype.Fb=function(a){K("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Va("Firebase.DataSnapshot.hasChild",a);return!this.c.e(new C(a)).a()};O.prototype.hasChild=O.prototype.Fb;O.prototype.f=function(){K("Firebase.DataSnapshot.getPriority",0,0,arguments.length);var a=this.c.f();return a===m?a:""+a};O.prototype.getPriority=O.prototype.f;
O.prototype.forEach=function(a){K("Firebase.DataSnapshot.forEach",1,1,arguments.length);M("Firebase.DataSnapshot.forEach",1,a,p);return this.c.M()?p:this.c.m(function(b,c){return a(new O(c,b))})};O.prototype.forEach=O.prototype.forEach;O.prototype.Ea=function(){K("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.c.M()?p:!this.c.a()};O.prototype.hasChildren=O.prototype.Ea;O.prototype.name=function(){K("Firebase.DataSnapshot.name",0,0,arguments.length);return this.$};
O.prototype.name=O.prototype.name;function Wa(a){for(var b in a)return p;return l};function Xa(){this.children={};this.value=m}function P(a,b,c){this.$=a?a:"";this.ya=b?b:m;this.c=c?c:new Xa}function Q(a,b){for(var c=b instanceof C?b:new C(b),d=a,e;(e=D(c))!==m;)d=new P(e,d,e in d.c.children?d.c.children[e]:new Xa),c=F(c);return d}t=P.prototype;t.b=function(){return this.c.value};function R(a,b){a.c.value=b;Ya(a)}t.clear=function(){this.c.value=m;this.c.children={};Ya(this)};t.Ea=function(){return!Wa(this.c.children)};t.a=function(){return this.b()===m&&!this.Ea()};
t.m=function(a){for(var b in this.c.children)a(new P(b,this,this.c.children[b]))};function Za(a,b){a.m(function(c){b(new P(c.name(),a,a.c.children[c.name()]));Za(c,b)})}function $a(a,b,c){for(a=c?a:a.parent();a!==m;)b(a),a=a.parent()}function ab(a,b){a.m(function(a){a.b()!==m?b(a):ab(a,b)})}function S(a,b){for(var c=a.c;c;){if(c.value!==m)return l;c=c.children[D(b)];b=F(b)}}t.path=function(){return new C(this.ya===m?this.$:this.ya.path()+"/"+this.$)};t.name=q("$");t.parent=q("ya");
function Ya(a){if(a.ya!==m){var b=a.ya,c=a.$,d=a.a(),e=c in b.c.children;d&&e?(delete b.c.children[c],Ya(b)):!d&&!e&&(b.c.children[c]=a.c,Ya(b))}};function bb(){this.set={}}t=bb.prototype;t.add=function(a,b){this.set[a]=b!==m?b:l};t.get=function(a){return this.set[a]};t.remove=function(a){delete this.set[a]};t.clear=function(){this.set={}};t.a=function(){for(var a in this.set)return p;return l};t.count=function(){var a=0,b;for(b in this.set)a++;return a};var cb="pLPCommand",db="pRTLPCB";
function eb(a,b,c,d,e){this.wa="http://"+a;this.kb=0;this.u=d;this.Nb=new fb(b);var g=this;this.X=setTimeout(function(){T("Timed out trying to connect.");g.close();g.X=m},3E4);gb(function(){if(!this.Ib){g.ba=new jb(function(a,b,d){if(g.ba)if(g.X&&(clearTimeout(g.X),g.X=m),"start"==a){c();a=g.ba;a.Lb=b;a.Mb=d;for(a.Ua=l;kb(a););g.oa=document.createElement("iframe");g.oa.src=g.wa+"?disconn=t&id="+b+"&pw="+d;g.oa.style.display="none";document.body.appendChild(g.oa)}else"reset"==a?(T("Got Server RESET packet."),
g.close()):"shutdown"==a&&(T("Shutdown message received from server, likely due to unmatching version numbers."),e())},function(a,b){var c=g.Nb;for(c.Ka[a]=b;c.Ka[c.Ca];){var d=c.Ka[c.Ca];delete c.Ka[c.Ca];for(var e=0;e<d.length;e++)d[e]&&c.Kb(d[e]);c.Ca++}},function(){g.close()},g.wa);var a=g.wa+"?start=t&ser="+Math.floor(1E8*Math.random())+"&v=1";T("Connecting via long-poll to "+a);lb(g.ba,a,function(){})}})}
eb.prototype.close=function(){T("Closing long-poll connection...");this.Ib=l;this.ba&&(this.ba.close(),this.ba=m);this.oa&&(document.body.removeChild(this.oa),this.oa=m);this.u&&(this.u(),this.u=m);this.X&&(clearTimeout(this.X),this.X=m)};eb.prototype.send=function(a){for(var a=na(a),a=mb(Ma(a),l),a=nb(a,1840),b=0;b<a.length;b++){var c=this.ba;c.za.push({Yb:this.kb,bc:a.length,lb:a[b]});c.Ua&&kb(c);this.kb++}};function fb(a){this.Kb=a;this.Ka=[];this.Ca=0}
function jb(a,b,c,d){this.wa=d;this.u=c;this.gb=new bb;this.za=[];this.Wa=Math.floor(1E8*Math.random());c=ob();window[cb+c]=a;window[db+c]=b;a=document.createElement("iframe");a.style.display="none";document.body?document.body.appendChild(a):f("Document body has not initialized. Wait to initialize Firebase until after the document is ready.");a.contentDocument?a.Q=a.contentDocument:a.contentWindow?a.Q=a.contentWindow.document:a.document&&(a.Q=a.document);this.N=a;a="<html><body><script>\nfunction "+
cb+'(c, a1, a2, a3, a4) {\nparent.window["'+cb+c+'"](c, a1, a2, a3, a4);\n}\nfunction '+db+'(pN, data) {\nparent.window["'+db+c+'"](pN, data);\n}\n<\/script></body></html>\n';this.N.Q.open();this.N.Q.write(a);this.N.Q.close()}jb.prototype.close=function(){this.Ua=p;this.N&&(this.N.Q.body.innerHTML="",document.body.removeChild(this.N),this.N=m);var a=this.u;a&&(this.u=m,a())};
function kb(a){if(a.Ua&&a.gb.count()<(0<a.za.length?2:1)){a.Wa++;for(var b=a.wa+"?id="+a.Lb+"&pw="+a.Mb+"&ser="+a.Wa,c="",d=0;0<a.za.length;)if(1870>=a.za[0].lb.length+30+c.length){var e=a.za.shift(),c=c+"&seg"+d+"="+e.Yb+"&ts"+d+"="+e.bc+"&d"+d+"="+e.lb;d++}else break;pb(a,b+c,a.Wa);return l}return p}function pb(a,b,c){function d(){a.gb.remove(c);kb(a)}a.gb.add(c);var e=setTimeout(d,25E3);lb(a,b,function(){clearTimeout(e);d()})}
function lb(a,b,c){setTimeout(function(){try{var d=a.N.Q.createElement("script");d.type="text/javascript";d.async=l;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;if(!a||"loaded"===a||"complete"===a)d.onload=d.onreadystatechange=m,d.parentNode&&d.parentNode.removeChild(d),c()};d.onerror=function(){T("Long-poll script failed to load.");a.close()};a.N.Q.body.appendChild(d)}catch(e){}},1)}
function nb(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c};var qb=m;"undefined"!==typeof MozWebSocket?qb=MozWebSocket:"undefined"!==typeof WebSocket&&(qb=WebSocket);
function rb(a,b,c,d,e){this.u=d;this.Ha=b;this.Rb=e;this.ua=m;this.state=0;this.frames=m;this.Ab=0;T("Connecting to ws://"+a);this.w=new qb("ws://"+a);var g=this;this.w.onopen=function(){T("Websocket connected.");g.w.send("version=1");c()};this.w.onclose=function(){T("Websocket disconnected.");g.w=m;g.close()};this.w.onmessage=function(a){a=a.data;0===g.state?"ok"===a?g.state=1:"kill"===a&&(T("Shutdown message received from server, likely due to unmatching version numbers."),g.Rb()):1===g.state?(g.Ab=
Number(a),g.state=2,g.frames=[]):2===g.state&&(g.frames.push(a),g.frames.length==g.Ab&&(a="undefined"!==typeof JSON&&u(JSON.parse)?JSON.parse(g.frames.join("")):ha(g.frames.join("")),g.state=1,sb(g),g.Ha(a)))};this.w.onerror=function(){T("WebSocket error.  Closing connection.");g.close()}}rb.prototype.send=function(a){sb(this);a=na(a);a=nb(a,16384);this.w.send(""+a.length);for(var b=0;b<a.length;b++)this.w.send(a[b])};
rb.prototype.close=function(){this.ua&&(clearTimeout(this.ua),this.ua=m);this.w&&(this.w.close(),this.w=m);this.u&&(this.u(),this.u=m)};function sb(a){clearTimeout(a.ua);a.ua=setInterval(function(){a.w.send("0");sb(a)},45E3)};function tb(a,b,c,d,e){function g(){n--;0===n&&d()}var i=m;if(qb===m)return N(l),i=new eb(a,b,function(){c(i)},d,e);var j=m,k=m,n=0;n++;k=setTimeout(function(){i=new eb(a,b,function(){j&&j.close();N(1===n,"Long-polling connection established, but outstandingConnections is "+n+".  Should be 1 now.");c(i)},g,e);k=m},450);n++;try{j=new rb(a,b,function(){k&&(n--,clearTimeout(k),k=m);i!=m&&i.close();N(1===n,"Websocket connection established, but outstandingConnections is "+n+".  Should be 1 now.");c(j)},
g,e)}catch(o){T("Websocket constructor threw exception:"+o),n--}return{close:function(){k&&clearTimeout(k);i!=m&&i.close();j.close();d()}}};function ub(){};function vb(){this.h=[];this.Va=[];this.Cb=[];this.Ja=[];this.Ja[0]=128;for(var a=1;64>a;++a)this.Ja[a]=0;this.reset()}ga(vb,ub);vb.prototype.reset=function(){this.h[0]=1732584193;this.h[1]=4023233417;this.h[2]=2562383102;this.h[3]=271733878;this.h[4]=3285377520;this.jb=this.ta=0};
function wb(a,b){var c;c||(c=0);for(var d=a.Cb,e=c;e<c+64;e+=4)d[e/4]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3];for(e=16;80>e;e++){var g=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(g<<1|g>>>31)&4294967295}c=a.h[0];for(var i=a.h[1],j=a.h[2],k=a.h[3],n=a.h[4],o,e=0;80>e;e++)40>e?20>e?(g=k^i&(j^k),o=1518500249):(g=i^j^k,o=1859775393):60>e?(g=i&j|k&(i|j),o=2400959708):(g=i^j^k,o=3395469782),g=(c<<5|c>>>27)+g+n+o+d[e]&4294967295,n=k,k=j,j=(i<<30|i>>>2)&4294967295,i=c,c=g;a.h[0]=a.h[0]+c&4294967295;a.h[1]=a.h[1]+i&
4294967295;a.h[2]=a.h[2]+j&4294967295;a.h[3]=a.h[3]+k&4294967295;a.h[4]=a.h[4]+n&4294967295}vb.prototype.update=function(a,b){u(b)||(b=a.length);var c=this.Va,d=this.ta,e=0;if(x(a))for(;e<b;)c[d++]=a.charCodeAt(e++),64==d&&(wb(this,c),d=0);else for(;e<b;)c[d++]=a[e++],64==d&&(wb(this,c),d=0);this.ta=d;this.jb+=b};var xb,yb,zb,Ab;function Bb(){return aa.navigator?aa.navigator.userAgent:m}Ab=zb=yb=xb=p;var Cb;if(Cb=Bb()){var Db=aa.navigator;xb=0==Cb.indexOf("Opera");yb=!xb&&-1!=Cb.indexOf("MSIE");zb=!xb&&-1!=Cb.indexOf("WebKit");Ab=!xb&&!zb&&"Gecko"==Db.product}var Eb=yb,Fb=Ab,Gb=zb;var Hb;if(xb&&aa.opera){var Ib=aa.opera.version;"function"==typeof Ib&&Ib()}else Fb?Hb=/rv\:([^\);]+)(\)|;)/:Eb?Hb=/MSIE\s+([^\);]+)(\)|;)/:Gb&&(Hb=/WebKit\/(\S+)/),Hb&&Hb.exec(Bb());var Jb=m,Kb=m;
function mb(a,b){ca(a)||f(Error("encodeByteArray takes an array as a parameter"));if(!Jb){Jb={};Kb={};for(var c=0;65>c;c++)Jb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),Kb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(c)}for(var c=b?Kb:Jb,d=[],e=0;e<a.length;e+=3){var g=a[e],i=e+1<a.length,j=i?a[e+1]:0,k=e+2<a.length,n=k?a[e+2]:0,o=g>>2,g=(g&3)<<4|j>>4,j=(j&15)<<2|n>>6,n=n&63;k||(n=64,i||(j=64));d.push(c[o],c[g],c[j],c[n])}return d.join("")}
;var ob=function(){var a=1;return function(){return a++}}();function N(a,b){a||f(Error("Firebase INTERNAL ERROR:"+b))}function Ga(a){var b=Ma(a),a=new vb;a.update(b);var b=[],c=8*a.jb;56>a.ta?a.update(a.Ja,56-a.ta):a.update(a.Ja,64-(a.ta-56));for(var d=63;56<=d;d--)a.Va[d]=c&255,c/=256;wb(a,a.Va);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c++]=a.h[d]>>e&255;return mb(b)}
function Lb(){for(var a="",b=0;b<arguments.length;b++)a=ca(arguments[b])?a+Lb.apply(m,arguments[b]):"object"===typeof arguments[b]?a+na(arguments[b]):a+arguments[b],a+=" ";return a}var Mb=p;function T(){if("undefined"!==typeof console&&Mb){var a=Lb.apply(m,arguments);console.log(a)}}var La=/^[\-+]?[0-9]*\.?[0-9]+$/;
function gb(a){if("complete"===document.readyState)a();else{var b=p,c=function(){document.body?b||(b=l,a()):setTimeout(c,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,p),window.addEventListener("load",c,p)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()},p),window.attachEvent("onload",c,p))}};function U(a,b,c,d,e){this.Tb=b;this.fb=c;this.Ga=d;this.eb=e;this.T={};this.Xb=0;this.La=[];this.ea=0;b=z(this.Sb,this);c=z(this.Ob,this);d=z(this.Pb,this);e=z(this.Qb,this);this.ja=tb(a,b,c,d,e)}U.prototype.Ba=function(a,b,c){var d=++this.Xb;Nb(this,{rn:d,payload:a});var e=this,a=setTimeout(function(){var a=e.T[d];a&&(delete e.T[d],a.K&&a.K.Ia&&a.K.Ia())},45E3);this.T[d]={K:{Ha:b,Ia:c},yb:a}};U.prototype.sendRequest=U.prototype.Ba;t=U.prototype;
t.Sb=function(a){if("rn"in a){var b=a.rn,c=this.T[b];c&&(delete this.T[b],clearTimeout(c.yb),c.K&&c.K.Ha&&c.K.Ha(a.data))}else"data"in a?this.Tb(a.data):("error"in a&&f("A server-side error has occurred: "+a.error),f("Unrecognized message returned from server: "+na(a)))};t.Ob=function(a){T("Realtime connection established.");this.ja=a;this.ea=1;for(a=0;a<this.La.length;a++)Nb(this,this.La[a]);this.La=m;this.fb&&(this.fb(),this.fb=m)};
t.Pb=function(){this.ja=m;0===this.ea?T("Realtime connection failed."):1===this.ea&&T("Realtime connection lost.");this.close()};t.Qb=function(){T("Connection shutdown command received. Shutting down...");this.eb&&(this.eb(),this.eb=m);this.Ga=m;this.close()};function Nb(a,b){2===a.ea&&f("Connection has already been closed.");0===a.ea?a.La.push(b):a.ja.send(b)}
t.close=function(){if(2!==this.ea){T("Closing realtime connection.");this.ea=2;this.ja&&(this.ja.close(),this.ja=m);this.Ga&&(this.Ga(),this.Ga=m);for(var a in this.T){var b=this.T[a];delete this.T[a];b!==m&&(b.K&&b.K.Ia&&b.K.Ia(),clearTimeout(b.yb))}}};U.prototype.close=U.prototype.close;function Ob(a,b){this.id=Pb++;this.Za={};this.A=[];this.xa=0;this.cb={};this.ka=p;this.Na=1E3;Qb(this,a,b)}var Pb=0;function Rb(a,b){a.o("Listen on "+b);a.Za[b]=l;a.ka&&a.Ma.Ba({action:"listen",path:b},m,function(){a.o("timed out on listen...")})}Ob.prototype.cc=function(a){this.o("Unlisten on "+a);delete this.Za[a];var b=this;this.ka&&this.Ma.Ba({action:"unlisten",path:a},m,function(){b.o("timed out on unlisten...")})};
Ob.prototype.u=function(a,b){this.cb[a]=b;this.o("onDisconnect",d);var c=this;if(this.ka){var d={action:"onDisconnect",path:a.toString(),data:b};this.Ma.Ba(d,function(a){"success"!==a.status&&f("onDisconnect failed: "+na(a.data))},function(){c.o("timed out on onDisconnect...")})}};Ob.prototype.put=function(a,b,c,d){a={action:"put",path:a.toString(),data:b};u(d)&&(a.hash=d);this.o("put",a);this.A.push({vb:a,z:c});this.xa++;c=this.A.length-1;this.ka&&Sb(this,c)};
function Sb(a,b){var c=a.A[b].z;a.Ma.Ba(a.A[b].vb,function(d){a.o("put response",d);delete a.A[b];a.xa--;0===a.xa&&(a.A=[]);c&&c(d.status)},function(){a.o("timed out on put...")})}
function Qb(a,b,c){var d=(new Date).getTime(),e=m;a.Ma=new U(b,function(b){a.o("handleServerMessage",b);c(b.path,b.data)},function(){a.ka=l;e=(new Date).getTime();for(var b in a.Za)Rb(a,b);for(b in a.cb)a.u(b,a.cb[b]);for(b=0;b<a.A.length;b++)a.A[b]&&Sb(a,b)},function(){a.ka=p;Tb(a);e&&(3E4<(new Date).getTime()-e&&(a.Na=1E3),e=m);var g=Math.max(0,a.Na-((new Date).getTime()-d)),g=Math.random()*g;setTimeout(function(){Qb(a,b,c)},g);a.Na=Math.min(3E4,1.3*a.Na)})}
function Tb(a){for(var b=0;b<a.A.length;b++){var c=a.A[b];c&&c.vb.hash&&(c.z&&c.z("disconnect"),delete a.A[b],a.xa--)}0===a.xa&&(a.A=[])}Ob.prototype.o=function(){T(this.id+":",arguments)};function Ub(){this.i=I}function Vb(a,b){return new O(a.i.e(b),H(b))}function V(a,b,c){a.i=a.i.ra(b,c)}function Yb(a,b,c,d){for(var e=a.i.e(b),c=c.i.e(b),d=Q(d,b),g=p,i=d;i!==m;){if(i.b()!==m){g=l;break}i=i.parent()}if(g)return p;d=Zb(c,e,d);return d!==e?(a.i=a.i.ra(b,d),l):p}Ub.prototype.v=function(){return Vb(this,new C("/")).v()};function Zb(a,b,c){if(c.a())return a;if(c.b()!==m)return b;a=a||I;c.m(function(d){var d=d.name(),e=a.t(d),g=b.t(d),i=Q(c,d),e=Zb(e,g,i);a=a.n(d,e)});return a};function $b(a,b,c){this.k=a;this.W=[];this.Ya=c;"default"===this.k.I()?this.d=b:(this.d=I,ac(this,b,bc(this,b,c),[]))}$b.prototype.addEventListener=function(a,b,c){this.W.push({type:a,sa:b});for(var d=bc(this,this.d,this.Ya),e=0;e<d.length;e++)d[e].type===a&&c.push({sa:b,P:d[e].P,Aa:d[e].Aa})};$b.prototype.removeEventListener=function(a,b){for(var c=p,d=0;d<this.W.length;d++){var e=this.W[d];if(e.type===a&&e.sa===b){this.W.splice(d,1);c=l;break}}return{ac:c,rb:0===this.W.length}};
function ac(a,b,c,d){0<c.length&&"value"===c[c.length-1].type&&(a.Ya=l);"default"!==a.k.I()?c=cc(a,b,c):a.d=b;for(b=0;b<c.length;b++){var e=c[b],g=e.type;"value"===e.type&&!e.P.Ea()?g+="("+e.P.v()+")":"value"!==e.type&&(g+=" "+e.P.name());T(a.k.path.s.Y.id+":event:"+a.k.path.q+":"+a.k.I()+":"+g);for(g=0;g<a.W.length;g++){var i=a.W[g];c[b].type===i.type&&d.push({sa:i.sa,P:e.P,Aa:e.Aa})}}}
function cc(a,b,c){var d=[],e=a.k;a.k.qa!=m&&d.push(function(a){return a>=e.qa});a.k.la!=m&&d.push(function(a){return a<=e.la});a.k.U!=m&&d.push(function(a,b){return b>=e.U});a.k.Z!=m&&d.push(function(a,b){return b<=e.Z});var g=m,i=m;if(u(a.k.S))if(u(a.k.U)){if(g=dc(b,d,a.k.S,p)){var j=b.t(g).f();d.push(function(a,b){return b<j||b===j&&a<=g})}}else if(i=dc(b,d,a.k.S,l)){var k=b.t(i).f();d.push(function(a,b){return b>k||b===k&&a>=i})}for(var n=[],o=[],v=[],E=[],y=0;y<c.length;y++){var w=c[y].type,
r=c[y].P,G=r.name(),Z=r.c;switch(w){case "child_added":ec(d,G,Z)&&(a.d=a.d.n(G,Z),o.push(r));break;case "child_removed":a.d.t(G).a()||(a.d=a.d.n(G,m),n.push(c[y]));break;case "child_changed":!a.d.t(G).a()&&ec(d,G,Z)&&(a.d=a.d.n(G,Z),E.push(r));break;case "child_moved":var w=!a.d.t(G).a(),Wb=ec(d,G,Z);w?Wb?(a.d=a.d.n(G,Z),v.push(r)):(n.push(new A("child_removed",new O(a.d.t(G),G))),a.d=a.d.n(G,m)):Wb&&(a.d=a.d.n(G,Z),o.push(r))}}var Xb=g||i;if(Xb){var zc=(y=i!==m)?a.d.nb():a.d.pb(),hb=p,ib=p;(y?b.Xa:
b.m).call(b,function(b,c){hb?(n.push(new A("child_removed",new O(a.d.t(b),b))),a.d=a.d.n(b,m)):ib&&(o.push(new O(c,b)),a.d=a.d.n(b,c));b===zc&&(ib=l);b===Xb&&(hb=l);if(ib&&hb)return l})}for(y=0;y<o.length;y++)r=o[y],b=a.d.D(r.name(),r.c),n.push(new A("child_added",r,b));for(y=0;y<v.length;y++)r=v[y],b=a.d.D(r.name(),r.c),n.push(new A("child_moved",r,b));for(y=0;y<E.length;y++)r=E[y],b=a.d.D(r.name(),r.c),n.push(new A("child_changed",r,b));0<n.length&&a.Ya&&n.push(new A("value",new O(a.d,a.k.path.name())));
return n}function dc(a,b,c,d){var e=m;(d?a.Xa:a.m).call(a,function(a,d){if(ec(b,a,d)&&(e=a,c--,0===c))return l});return e}function ec(a,b,c){for(var d=0;d<a.length;d++)if(!a[d](b,c.f()))return p;return l}function bc(a,b,c){var d=[];if(!b.M()){var e=m;b.m(function(a,b){d.push(new A("child_added",new O(b,a),e));e=a})}c&&d.push(new A("value",new O(b,a.k.path.name())));return d};function fc(a,b){this.Zb=a;this.ub=b;this.ca=new Ub;this.p=new Ub;this.G=new Ub;this.O=new P;this.Ra=new P;this.V=new P;this.C=new P;this.ab=I;var c=this;this.Y=new Ob(a+"/"+b,function(a,b){gc(c,a,b)})}
function hc(a,b,c,d){var e=b.path.q,g=Q(a.V,e),i=g.b();if(i===m){var i={J:{}},j=p;$a(g,function(a){a.b()&&a.b().fa&&(j=l)});j||(i.fa=ic(a,e.toString()),Za(g,function(a){a=a.b();a!==m&&a.fa&&(a.fa(),a.fa=m)}));R(g,i)}var g=b.I(),k=i.J[g];k||(k=a.G.i.e(e),a=S(a.C,e),k=new $b(b,k,a),i.J[g]=k);b=[];k.addEventListener(c,d,b);jc(b)}
function kc(a,b,c,d){var e=b.path.q,g=Q(a.V,e),i=g.b(),j;if(i!==m){if("default"!==b.I()){if(j=i.J[b.I()])j=j.removeEventListener(c,d),j.rb&&delete i.J[b.I()]}else{var b=m,k=p,n;for(n in i.J)if(j=i.J[n].removeEventListener(c,d),j.ac){b=n;k=j.rb;break}k&&delete i.J[b]}if(Wa(i.J)){if(i.fa){var o=S(a.C,e);ab(g,function(b){b.fa=ic(a,b.path().toString());o&&R(Q(a.C,b.path()),l)});i.fa()}R(g,m)}}}function ic(a,b){Rb(a.Y,b);return z(a.Y.cc,a.Y,b)}
function gc(a,b,c){if(9<=b.length&&b.lastIndexOf(".priority")===b.length-9)b=new C(b.substring(0,b.length-9)),c!==m&&La.test(c)&&(c=Number(c)),V(a.ca,b,a.ca.i.e(b).Ta(c));else{b=new C(b);V(a.ca,b,Ka(c));var d=p;$a(Q(a.V,b),function(a){a.b()&&a.b().qb&&(d=l)},l);if(!d&&(c=Q(a.V,b).b()))c.qb=l}Yb(a.p,b,a.ca,a.O)?lc(a,mc(a,b)):nc(a,b)}function oc(a,b){$a(Q(a.V,b),function(a){if(a.b()&&a.b().qb)return l});return p}
function nc(a,b){var c=[],d=a.ab,e=a.G.i;a.ab=a.G.i;var g=d.e(b),i=e.e(b),j=pc(a,b.toString(),g,i,c),g=g.f()!==i.f();if(j||g)for(var i=g,k=Q(a.V,b);k.parent()!==m;){var n=d.e(k.path()),o=e.e(k.path()),g=k.parent();if(g.b()){var v=g.path(),v=e.e(v),E=[],k=H(k.path());if(n.a())n=v.D(k,o),E.push(new A("child_added",new O(o,k),n));else if(o.a())E.push(new A("child_removed",new O(n,k)));else if(j&&(n=v.D(k,o),E.push(new A("child_changed",new O(o,k),n))),i)n=v.D(k,o),E.push(new A("child_moved",new O(o,
k),n)),j=l;S(a.C,g.path())&&(i=H(g.path())||a.name(),E.push(new A("value",new O(v,i))));c.push({path:g.path().toString(),Da:E})}k=g;i=p}for(d=0;d<c.length;d++)if(o=a,e=c[d].Da,v=new C(c[d].path),j=Q(o.V,v).b(),j!==m){g=j.J;i=[];o=o.ab.e(v);v=h;for(v in g)ac(j.J[v],o,e,i);jc(i)}}
function pc(a,b,c,d,e){var g;c===d&&(g=p);c.M()&&d.M()?g=c.b()!==d.b():c.M()?(qc(a,b,I,d,e),g=l):d.M()?(qc(a,b,c,I,e),g=l):g=qc(a,b,c,d,e);var c=new C(b),i=p;S(a.C,c)||(Za(Q(a.V,c),function(b){S(a.C,b.path())||e.push({path:b.path(),Da:[new A("value",new O(I,H(b.path())))]})}),i=l,Q(a.C,c).clear(),R(Q(a.C,c),l));if(g||i)c=H(c)||a.name(),e.push({path:b,Da:[new A("value",new O(d,c))]});return g}
function qc(a,b,c,d,e){var g=p,i=[],j=[],k=[],n=[],o={},v={},E,y,w,r;E=c.ma();w=sa(E);y=d.ma();for(r=sa(y);w!==m||r!==m;)if(c=w===m?1:r===m?-1:w.key===r.key?0:Ja({name:w.key,r:w.value.f()},{name:r.key,r:r.value.f()}),0>c)g=o[w.key],u(g)?(n.push({mb:w,zb:j[g]}),j[g]=m):(v[w.key]=k.length,k.push(w)),g=l,w=sa(E);else{if(0<c)g=v[r.key],u(g)?(n.push({mb:k[g],zb:r}),k[g]=m):(o[r.key]=j.length,j.push(r)),g=l;else{c=b+"/"+r.key;if(c=pc(a,c,w.value,r.value,e))w=d.D(r.key,r.value),i.push(new A("child_changed",
new O(r.value,r.key),w)),g=l;w=sa(E)}r=sa(y)}for(o=0;o<k.length;o++)if(v=k[o])c=b+"/"+v.key,pc(a,c,v.value,I,e),i.push(new A("child_removed",new O(v.value,v.key)));for(o=0;o<j.length;o++)if(k=j[o])c=b+"/"+k.key,w=d.D(k.key,k.value),pc(a,c,I,k.value,e),i.push(new A("child_added",new O(k.value,k.key),w));for(o=0;o<n.length;o++)k=n[o].mb,j=n[o].zb,c=b+"/"+j.key,w=d.D(j.key,j.value),i.push(new A("child_moved",new O(j.value,j.key),w)),(c=pc(a,c,k.value,j.value,e))&&i.push(new A("child_changed",new O(j.value,
j.key),w));0<i.length&&e.push({path:b,Da:i});return g}function jc(a){for(var b=0;b<a.length;b++){var c=a[b].sa;c(a[b].P,a[b].Aa)}}
fc.prototype.Qa=function(a,b,c,d){c!==m&&La.test(c)&&(c=Number(c));this.o("set",{path:a.toString(),value:b});var e=ob(),g=this;R(Q(this.O,a),e);V(this.p,a,Ka(b,c));b=this.p.i.e(a).v(l);rc(this,a,b,function(b){N("success"===b,"put failed.  WHAT TO DO!? WHAT TO DO!?");var b=Q(g.O,a),c=b.b();N(c!==m,"setWithPriority: pendingSet should not be null.");c===e&&(R(b,m),oc(g,a)&&(Yb(g.p,a,g.ca,g.O),b=mc(g,a),lc(g,b)));d&&d(l)});b=mc(this,a);sc(this,a);lc(this,b)};
function sc(a,b){var c=Q(a.Ra,b);$a(c,function(b){tc(a,b)});tc(a,c);Za(c,function(b){tc(a,b)})}function tc(a,b){var c=b.b();if(c!==m){for(var d=-1,e=0;e<c.length;e++)if(c[e].status===uc)N(d===e-1,"All SENT items should be at beginning of queue."),d=e,c[e].status=vc;else if(c[e].Sa(),c[e].z){var g=S(a.C,b.path())?Vb(a.G,b.path()):m;c[e].z(p,g)}-1===d?R(b,m):c.length=d+1}}var uc=2,vc=4;
function wc(a,b,c,d){function e(){}a.o("transaction on "+b);var g=new W(a,b);g.bb("value",e);var c={tb:b,update:c,z:d,sb:ob(),xb:0,Sa:function(){g.$a("value",e)}},d=a.G,i=c.update(d.i.e(b).v());if(u(i)){Ra("transaction failed: Data returned ",i);var j=a.p.i.e(b).f();V(d,b,Ka(i,j));nc(a,b);c.status=1;b=Q(a.Ra,b);d=b.b()||[];d.push(c);R(b,d);xc(a)}else c.Sa(),c.z&&(a=S(a.C,b)?Vb(a.G,b):m,c.z(p,a))}function xc(a,b){var c=b||a.Ra;b||yc(a,c);c.a()||(c.b()!==m?Ac(a,c):c.m(function(b){xc(a,b)}))}
function Ac(a,b){var c=Bc(a,b);if(0!==c.length){var d=b.path();if(c[0].status!==uc&&c[0].status!==vc){for(var e=0;e<c.length;e++)N(1===c[e].status,"tryToSendTransactionForNode_: items in queue should all be run."),c[e].status=uc,c[e].xb++;var g=a.p.i.e(d).hash();V(a.p,d,a.G.i.e(d));var i=a.p.i.e(d).v(l),j=ob();R(Q(a.O,d),j);rc(a,d,i,function(g){a.o("transaction put response",{path:d.toString(),status:g});var i=Q(a.O,d),o=i.b();N(o!==m,"tryToSendTransactionsForNode_: pendingSet should not be null.");
o===j&&(R(i,m),V(a.p,d,a.ca.i.e(d)));if("success"===g){for(e=0;e<c.length;e++)c[e].status=3,c[e].z&&(g=S(a.C,d),N(g,"Transaction completed successfully but we don't have data for this location!?"),g=Vb(a.G,b.path()),c[e].z(l,g)),c[e].Sa();xc(a)}else if("datastale"===g||"disconnect"===g){if("datastale"===g)for(e=0;e<c.length;e++)c[e].status=c[e].status===vc?5:1;else if("disconnect"===g)for(e=0;e<c.length;e++)c[e].status=6;g=mc(a,d);lc(a,g)}else N(p,"Got unexpected put response to transaction: "+g)},
g)}}}
function lc(a,b){var c=b.path();V(a.G,c,a.p.i.e(c));var d=Bc(a,b);if(0!==d.length){for(var e=a.G.i.e(c),g=0;g<d.length;g++){var i=Ea(c,d[g].tb),j=p,k;N(i!==m,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===d[g].status)j=l,k="set";else if(6===d[g].status)j=l,k="disconnect";else if(1===d[g].status)if(25<=d[g].xb)j=l,k="maxretry";else{var n=d[g].update(e.e(i).v());u(n)?(Ra("transaction failed: Data returned ",n),e=e.ra(i,Ka(n))):(j=l,k="nodata")}j&&(d[g].Sa(),d[g].status=3,d[g].z&&
(j=H(d[g].tb)||a.name(),i=new O(e.e(i),j),d[g].z(p,i,k)))}d=a.p.i.e(c).f();V(a.G,c,e.Ta(d));xc(a)}nc(a,c)}function mc(a,b){for(var c,d=a.Ra;(c=D(b))!==m&&d.b()===m;)d=Q(d,c),b=F(b);return d}function Bc(a,b){var c=[];Cc(a,b,c);c.sort(function(a,b){return a.sb-b.sb});return c}function Cc(a,b,c){var d=b.b();if(d!==m)for(var e=0;e<d.length;e++)c.push(d[e]);b.m(function(b){Cc(a,b,c)})}
function yc(a,b){var c=b.b();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;R(b,0<c.length?c:m)}b.m(function(b){yc(a,b)})}t=fc.prototype;t.ib=function(a,b,c){var d=ob(),e=this;rc(this,a.toString()+"/.priority",b,function(b){var i=Q(e.O,a),j=i.b();N(j!==m,"setPriority: pendingSet should not be null.");j===d&&(R(i,m),Yb(e.p,a,e.ca,e.O),i=mc(e,a),lc(e,i));c&&c("success"===b)});R(Q(this.O,a),d);V(this.p,a,Vb(this.p,a).c.Ta(b));lc(this,mc(this,a))};
t.Pa=function(a,b){this.Y.u(a,b)};function rc(a,b,c,d,e){a.Y.put(b,c,d,e)}t.toString=function(){return"http://"+this.Zb+"/"+Da(this.ub)};t.name=q("ub");t.o=function(){T(this.Y.id+":",arguments)};function Dc(){this.hb={}}Dc.ob=function(){return Dc.Hb||(Dc.Hb=new Dc)};function X(a,b,c,d,e,g){this.path=a;this.S=b;this.U=c;this.qa=d;this.Z=e;this.la=g;u(this.U)&&u(this.Z)&&u(this.S)&&f("firebase.Query: Can't combine startAt(), endAt(), and limit().")}X.prototype.bb=function(a,b){K("firebase.Query.on",2,2,arguments.length);Ta("firebase.Query.on",a);M("firebase.Query.on",2,b,p);hc(this.path.s,this,a,b);return b};X.prototype.on=X.prototype.bb;
X.prototype.$a=function(a,b){K("firebase.Query.off",2,2,arguments.length);Ta("firebase.Query.off",a);M("firebase.Query.off",2,b,p);kc(this.path.s,this,a,b)};X.prototype.off=X.prototype.$a;X.prototype.Ub=function(a,b){function c(g){e&&(e=p,d.$a(a,c),b(g))}K("firebase.Query.once",2,2,arguments.length);Ta("firebase.Query.once",a);M("firebase.Query.once",2,b,p);var d=this,e=l;this.bb(a,c)};X.prototype.once=X.prototype.Ub;
X.prototype.Jb=function(a){K("firebase.Query.limit",1,1,arguments.length);(!da(a)||Math.floor(a)!==a||0>=a)&&f("firebase.Query.limit: First argument must be a positive integer.");return new X(this.path,a,this.U,this.qa,this.Z,this.la)};X.prototype.limit=X.prototype.Jb;X.prototype.$b=function(a,b){K("firebase.Query.startAt",0,2,arguments.length);Sa("firebase.Query.startAt",1,a,l);Ua("firebase.Query.startAt",b);u(a)||(b=a=m);return new X(this.path,this.S,a,b,this.Z,this.la)};X.prototype.startAt=X.prototype.$b;
X.prototype.Db=function(a,b){K("firebase.Query.endAt",0,2,arguments.length);Sa("firebase.Query.endAt",1,a,l);Ua("firebase.Query.endAt",b);return new X(this.path,this.S,this.U,this.qa,a,b)};X.prototype.endAt=X.prototype.Db;X.prototype.I=function(){var a=[];u(this.U)&&a.push({sp:this.U});u(this.qa)&&a.push({sn:this.qa});u(this.Z)&&a.push({ep:this.Z});u(this.la)&&a.push({en:this.la});u(this.S)&&a.push({l:this.S});return 0===a.length?"default":na(a)};var Ec=function(){var a=0,b=[];return function(){var c=(new Date).getTime(),d=c===a;a=c;for(var e=Array(8),g=7;0<=g;g--)e[g]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);N(0===c);c=e.join("");if(d){for(g=11;0<=g&&63===b[g];g--)b[g]=0;b[g]++}else for(g=0;12>g;g++)b[g]=Math.floor(64*Math.random());for(g=0;12>g;g++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[g]);N(20===c.length,"NextPushId: Length should be 20.");
return c}}();function W(){var a,b,c;X.call(this,this);if(arguments[0]instanceof fc)this.s=arguments[0],this.q=arguments[1];else{K("new Firebase",1,1,arguments.length);a=arguments[0];var d="";c=b="";if(x(a)){var e=a.indexOf("://");0<e&&(a=a.substring(e+3));e=a.indexOf("/");0<e&&(d=a.substring(0,e),a=a.substring(e+1),e=a.indexOf("/"),0<e?(b=a.substring(0,e),c=a.substring(e)):(b=a,c="/"))}a=d;c=new C(c);d=c.toString();(!x(a)||0===a.length||!Pa(b)||0!==d.length&&(!x(d)||0===d.length||Oa.test(d)))&&f(Error(L("new Firebase",
1,p)+"must be a valid firebase URL."));var d=Dc.ob(),e=a+"/"+b,g=d.hb[e];g||(g=new fc(a,b),d.hb[e]=g);this.s=g;this.q=c}}ga(W,X);var Fc=W,Gc=["Firebase"],Y=aa;!(Gc[0]in Y)&&Y.execScript&&Y.execScript("var "+Gc[0]);for(var Hc;Gc.length&&(Hc=Gc.shift());)!Gc.length&&u(Fc)?Y[Hc]=Fc:Y=Y[Hc]?Y[Hc]:Y[Hc]={};W.prototype.name=function(){K("Firebase.name",0,0,arguments.length);return this.q.a()?this.s.name():H(this.q)};W.prototype.name=W.prototype.name;
W.prototype.ha=function(a){K("Firebase.child",1,1,arguments.length);da(a)&&(a=""+a);Va("Firebase.child",a);return new W(this.s,this.q.ha(a))};W.prototype.child=W.prototype.ha;W.prototype.parent=function(){K("Firebase.parent",0,0,arguments.length);var a=this.q.parent();return a===m?m:new W(this.s,a)};W.prototype.parent=W.prototype.parent;W.prototype.toString=function(){K("Firebase.toString",0,0,arguments.length);return this.parent()===m?this.s.toString():this.parent().toString()+"/"+Da(this.name())};
W.prototype.toString=W.prototype.toString;W.prototype.set=function(a,b){K("Firebase.set",1,2,arguments.length);Qa("Firebase.set",a,p);M("Firebase.set",2,b,l);(".length"===this.name()||".keys"===this.name())&&f("Firebase.set failed: "+this.name()+" is a read-only object.");return this.s.Qa(this.q,a,m,b)};W.prototype.set=W.prototype.set;
W.prototype.Qa=function(a,b,c){K("Firebase.setWithPriority",2,3,arguments.length);Qa("Firebase.setWithPriority",a,p);Sa("Firebase.setWithPriority",2,b,p);M("Firebase.setWithPriority",3,c,l);(".length"===this.name()||".keys"===this.name())&&f("Firebase.setWithPriority failed: "+this.name()+" is a read-only object.");return this.s.Qa(this.q,a,b,c)};W.prototype.setWithPriority=W.prototype.Qa;
W.prototype.remove=function(a){K("Firebase.remove",0,1,arguments.length);M("Firebase.remove",1,a,l);this.set(m,a)};W.prototype.remove=W.prototype.remove;W.prototype.transaction=function(a,b){K("Firebase.transaction",1,2,arguments.length);M("Firebase.transaction",1,a,p);M("Firebase.transaction",2,b,l);(".length"===this.name()||".keys"===this.name())&&f("Firebase.transaction failed: "+this.name()+" is a read-only object.");wc(this.s,this.q,a,b)};W.prototype.transaction=W.prototype.transaction;
W.prototype.ib=function(a,b){K("Firebase.setPriority",1,2,arguments.length);Sa("Firebase.setPriority",1,a,p);M("Firebase.setPriority",2,b,l);a!==m&&La.test(a)&&(a=Number(a));this.s.ib(this.q,a,b)};W.prototype.setPriority=W.prototype.ib;W.prototype.push=function(a,b){K("Firebase.push",0,2,arguments.length);Qa("Firebase.push",a,l);M("Firebase.push",2,b,l);var c=this.ha(Ec());"undefined"!==typeof a&&a!==m&&c.set(a,b);return c};W.prototype.push=W.prototype.push;
W.prototype.Vb=function(){K("Firebase.removeOnDisconnect",0,0,arguments.length);this.s.Pa(this.q,m)};W.prototype.removeOnDisconnect=W.prototype.Vb;W.prototype.Pa=function(a){K("Firebase.setOnDisconnect",1,1,arguments.length);Qa("Firebase.setOnDisconnect",a,p);this.s.Pa(this.q,a)};W.prototype.setOnDisconnect=W.prototype.Pa;W.enableLogging=function(a){Mb=a};var $={};W.TEST_HOOKS=$;$.Wb=function(){return Dc.ob().hb};$.repos=$.Wb;
$.Gb=function(a){var b=J.prototype.hash;J.prototype.hash=a;return function(){J.prototype.hash=b}};$.hijackHash=$.Gb;$.I=function(a){return a.I()};$.queryIdentifier=$.I;$.Bb=U;$.RealTimeConnection=$.Bb;})();
